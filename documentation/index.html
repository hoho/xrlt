---
layout: default
title: Documentation
section: Documentation
---
<h3 id="intro" xmlns="http://www.w3.org/1999/html"
    xmlns="http://www.w3.org/1999/html" xmlns="http://www.w3.org/1999/html"
    xmlns="http://www.w3.org/1999/html">Introduction</h3>
<p>Before we begin, let's talk buzzwords. I hope reader is familiar with
<a href="http://en.wikipedia.org/wiki/XML">XML</a> and
<a href="http://en.wikipedia.org/wiki/XPath">XPath</a>,
<a href="http://en.wikipedia.org/wiki/JavaScript">JavaScript</a> and
<a href="http://en.wikipedia.org/wiki/JSON">JSON</a>,
<a href="http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol">HTTP</a>,
<a href="http://en.wikipedia.org/wiki/Asynchronous_I/O">Asynchronous I/O</a>
and <a href="http://en.wikipedia.org/wiki/XSLT">XSLT</a>. Guess, familiarity
with these, guarantees familiarity with all the rest terms that would be
used. You could move straight to <a href="/documentation/#syntax">Syntax</a>
chapter to see XRLT examples.</p>

<h3 id="frontends">About Frontends and XRLT</h3>
<p>Frontend is a thing takes data from backend and transforms it to view.
Frontend is also a thing takes user's input and transmits it to backend.
For our purposes, backend is just some black box, that gives and takes
data.</p>

<p>XRLT is for creating frontends. It is a server-side scripting language.
Something like <a href="http://en.wikipedia.org/wiki/PHP">PHP</a>, but almost
completely different.</p>

<p>The main difference is that XRLT is not a general-purpose language. You can
run spaceships with things like PHP, but that leads to a countless number of
ways to do the same. XRLT has a very limited set of instructions. It aims to
standardize and simplify common frontend development scenarios.</p>

<h3 id="xmljs">Melting XML and JavaScript Down</h3>
<p>We have HTML and JavaScript for web-pages. The skeleton is XML-based and all
the dynamic is mostly about JavaScript.</p>

<p>Most backends give us JSON or XML. Sometimes it's necessary to work with
both at the same project.</p>

<p>So, in XRLT we stick XML and JavaScript together. And it would be great if
the stitches cause no pain.</p>

<h3 id="rddm">Reasonably-Destructive Data Mapping</h3>
<p><a href="http://www.w3.org/2011/10/integration-workshop/s/ExperienceswithJSONandXMLTransformations.v08.pdf">Mapping
between XML and JSON is tricky</a>. We can think of non-destructive ways to map
XML to JSON, or JSON to XML. And this will bring us to non-friendly result.</p>

<p>But we don't need non-destructivity completely. User-friendly data
representation is much more important in most cases. Anyway, XRLT allows to
access data before any destructive mapping happened.</p>

<p>The structure: {% highlight javascript %}{
    "root": {
        "hello": "123",
        "world": "yo",
        "this": [
            "1", "2", 3
        ],
        "is": {
            "very": true,
            "cool": [
                4, "5", {"really": "is"}
            ]
        }
    }
}{% endhighlight %}</p>

<p>is being mapped to (and back): {% highlight xml %}<root>
    <hello>123</hello>
    <world>yo</world>
    <this>1</this>
    <this>2</this>
    <this xrl:type="number">3</this>
    <is>
        <very xrl:type="boolean">true</very>
        <cool xrl:type="number">4</cool>
        <cool>5</cool>
        <cool>
            <really>is</really>
        </cool>
    </is>
</root>{% endhighlight %}</p>

<p>This mapping is destructive, but it has pros:
<ul>
    <li>It's pretty human-readable;</li>
    <li>Works both ways (XML to JSON and JSON to XML);</li>
    <li>We have a cosy way to address elements. JavaScript to get second "is"
        looks like <code>data.root.is.cool[2].really</code>. XPath is much more
        flexible and there are many ways to get second "is", one of them is
        <code>/root/is/cool[3]/really</code>. Almost the same.</li>
</ul></p>

<h6>JSON to XML</h6>
<p>JSON to XML mapping should produce well-formed XML with two exceptions:
<ol>
    <li>More than one root element is allowed.</li>
    <li>Text node is allowed as root element.</li>
</ol>

Details described below still require more thinking, some details are subject
to be corrected.</p>

<p>
{% highlight javascript %}// Non-empty object creates a set of nodes:
{
    // Object's property creates a node with the same name.
    "str": "string",   // <str>string</str>
    "num": 123,        // <num xrl:type="number">123</num>
    "bool": true,      // <bool xrl:type="boolean">true</bool>
    "null": null,      // <null />
    "arr": ["1", "2"], // <arr>1</arr>
                       // <arr>2</arr>
    "empty": {},       // <empty xrl:type="object" />
    "obj": {...}       // <obj>and so on...</obj>
}


// Empty object:
{} // <object xrl:type="object" />


// Top-level string, number or boolean become text root node:
"string" // string
123      // 123
false    // false


// Object property's array:
{"array": [1, "2", false]} // <array xrl:type="number">1</array>
                           // <array>2</array>
                           // <array xrl:type="boolean">false</array>


// Top-level array or array's array:
[
    1,                     // <item xrl:array="yes" xrl:type="number">1</item>
    "2",                   // <item>2</item>
    false,                 // <item xrl:type="boolean">false</item>
    [                      // <item>
        "boo",             //     <item xrl:array="yes">boo</item>
        "moo",             //     <item>moo</item>
        {                  //     <item>
            "goo": [       //         <goo>5</goo>
                "5",       //         <goo>
                ["8", "9"] //             <item>8</item><item>9</item>
            ]              //         </goo>
        }                  //     </item>
    ]                      // </item>
]


// Top-level empty array:
[] // <item xrl:array="yes" />

{"test": []} // <test xrl:type="array" />


// Top-level null:
null // <null xrl:type="null" />

// Array of null:
[null] // <item xrl:array="yes" xrl:type="null" />

// More null:
{"test": [null, [null], []]} // <test />
                             // <test>
                             //     <item xrl:array="yes" xrl:type="null" />
                             // </test>
                             // <test xrl:type="array" />
{% endhighlight %}</p>

<h6>XML to JSON</h6>
<p>Pending.</p>

<h3 id="syntax">Syntax</h3>
<p>Pending.</p>

<h3 id="basic">Basic Instructions</h3>
<p>Pending.</p>

<h3 id="includes">Data Including</h3>
<p>Pending.</p>

<h3 id="templates">Templates</h3>
<p>Pending.</p>

<h3 id="forms">Form Validation</h3>
<p>Pending.</p>

<h3 id="request">Request Information</h3>
<p>Pending.</p>

<h3 id="caching">Caching</h3>
<p>Pending.</p>

<h3 id="moar">Moar</h3>
<p>Pending.</p>
